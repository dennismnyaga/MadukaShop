{% extends 'shopapp/main.html' %}
{% load static %}
{% load humanize %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.9/slick.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.9/slick-theme.min.css">
 <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.9/slick.min.js"></script>
<link rel="stylesheet" href="{% static 'shopapp/css/details.css' %}">

<div class="details mb-4">
    <div class="row pt-5 mt-5">
        <div class="col-6 mm">
            <div id="carouselExampleIndicators" class="carousel slide mb-4" data-bs-ride="true">
                <div class="carousel-indicators">
                {% for image in images %}
                {% if forloop.first %}
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{ forloop.counter0 }}" class="active" aria-current="true" aria-label="Slide {{ forloop.counter1 }}"></button>
                {% else %}
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{ forloop.counter0 }}" aria-label="Slide {{ forloop.counter1 }}"></button>
                  <!-- <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button> -->
                {% endif %}
                  {% endfor %}
                </div>
                <div class="carousel-inner">
                    {% for image in images|slice:":1" %}
                    
                  <div class="carousel-item active">
                    <img src="{{ image.image.url }}" class="d-block w-100" alt="...">
                  </div>
                  {% endfor %}
                  {% for image in images|slice:"1:" %}
                  <div class="carousel-item">
                    <img src="{{ image.image.url }}" class="d-block w-100" alt="...">
                  </div>
                  {% endfor %}
                  
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>

              <div class="more">
                <div class="views">
                    <p>AD Views:</p>
                    {{ product.views }}
                    <!-- <h5>234</h5> -->
                </div>
                <div class="views">
                    <p>AD Likes:</p>
                    <h5>
                        {% if product.likes.count %}
                        <p>{{ product.likes.count }} likes</p>
                        {% else %}
                        <p>No likes</p>
                        {% endif %}
                    </h5>
                    <!-- <h5>234</h5> -->
                </div>
                <div class="views">
                    <p>Shop Registerd on:</p>
                    <h5>{{product.shop.registered_on|date}}</h5>
                </div>
              </div>
              <div class="tips mt-3">
                <h5>Safety tips:</h5>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis, veritatis voluptatem, iure autem ea itaque et temporibus dolorem inventore, ratione aut sunt. Sed quasi fuga accusamus quas quidem nulla eos libero, voluptatum dolorem non vitae voluptas iure, cumque magnam a illum velit dicta suscipit optio? Quisquam laboriosam sit facere natus sapiente in vel, hic consequuntur dolorum voluptatum ut quam itaque odio nesciunt odit molestiae eos. Consequuntur iusto aspernatur consectetur non explicabo esse dolorum qui nemo? Ab quasi unde voluptas enim optio voluptatum <br> dolore distinctio expedita deleniti. Dolore iste laudantium totam unde eveniet, ex voluptas, ratione accusamus doloribus, ad commodi dolores.</p>
            </div>
            <div class="tip">
                <a href="#">Report Abuse</a>
            </div>
        </div>
        <div class="col-6 ps-5">
            <div class="product-details">
                <div class="head">
                    <h5>{{product.ad_title }}</h5>
                    <span>Posted on {{product.date_posted|date:'l, F j, Y'}}</span>
                    <p> <i class="icofont-location-pin"></i>{{ product.location }}</p>
                </div>
                <div class="price">
                    <h3>KES {{product.price|intcomma}}</h3>
                    <p>from <span>KES 3100</span> </p>
                </div>
                <div class="customer">
                    <div class="proc-pic">
                        <div class="green_icon"></div>
                        <img src="{{ product.owner.profile_pic.url }}" alt="">
                        <!-- <img src="{% static 'shopapp/images/ju.jpg' %}" alt=""> -->
                    </div>
                    <div class="pro-details">
                        <span>Sold by:</span>
                        <h6>{{product.owner.first_name}} {{product.owner.last_name}}</h6>
                        <span>Last seen: <p> Now</p></span>
                        <div class="ratings">
                            <span class="glyphicon glyphicon-star"><i class="icofont-star"></i></span>
                            <span class="glyphicon glyphicon-star"><i class="icofont-star"></i></span>
                            <span class="glyphicon glyphicon-star"><i class="icofont-star"></i></span>
                            <span class="glyphicon glyphicon-star"><i class="icofont-star"></i></span>
                            <span class="glyphicon glyphicon-star"><i class="icofont-star"></i></span>
                        </div>
                    </div>     
                </div>

                <div class="contact mt-5">
                    <a class="btn btn-primary" href="tel:{{product.owner.phone_number}}">CONTACT SELLER</a>
                </div>
                <div class="chat mb-5">
                    <a class="btn btn-primary" href="https://wa.me/{{product.owner.phone_number}}">START CHAT</a>
                </div>
                <!-- ============================================= -->
                <div class="tips">
                    <h5>Safety tips:</h5>
                    <p>
                        <ul>
                            <li>pay when satisfied</li>
                            <li>request for more images in case the image provided is not clear</li>
                            <li>inspect the item to make sure is what you want</li>
                            <li>meet the seller at a safe public place</li>
                        </ul>
                    </p>
                </div>

                <div class="tip">
                    <a href="#">Report Abuse</a>
                </div>
                <!-- ===============below======================= -->
                <div class="contact mt-5">
                    <a class="btn btn-primary" href="#">VISIT SHOP</a>
                </div>
                <div class="chat mb-5">
                    <a class="btn btn-primary" href="#">POST SIMILAR AD</a>
                </div>
            </div>    
        </div>

        <div class="similar">
            <div class="title">
                <div>SIMILAR PPRODUCTS </div>
            </div>
            <div class=" scrollmenu">
              
                <div class="card " style="width: 15rem;">
                    {% with product.images.first as product_image %}
                    <a href="{% url 'shopapp:details' product.id %}">
                    <img src="{{ product_image.image.url }}" class="card-img-top" alt="{{ product.ad_title }}">
                    <span class="material-symbols-outlined">
                      favorite
                      </span>
                  </a>
                    {% endwith %}
                    <div class="card-body">
                      <h5 class="card-title">{{product.ad_title }}</h5>
                      <div class="caption">
                        <div class="ro">
                                        <div class="price">
                                            <p>KES {{product.price|intcomma}}</p>
                                        </div>
                                        <div class=" pric d-flex">
                                            <i class="icofont-location-pin"></i>
                            <p>{{ product.location }}</p>
                                        </div>
                                    </div>
                      </div>
                      </div>
                  </div>
               
               
               
              
               
              </div>
        </div>
        
</div>


<script type="text/javascript" src="{% static 'shopapp/js/details.js' %}"></script>
{% endblock content %}